<app-header></app-header>

<div class="col-md-3 mx-auto fade-in mt-5">
    <h2 class="product-header fade-in">Thông tin người dùng</h2>
    <h4 class="product-header fade-in">Quản lý hồ sơ để bảo mật tài khoản</h4>
    <div class="mb-3">
        <label for="fullname" class="form-label">Họ và tên</label>
        <p id="fullname" class="form-control-static">{{ user.fullname }}</p>
    </div>
    <div class="mb-3">
        <label for="address" class="form-label">Địa chỉ</label>
        <p id="address" class="form-control-static">{{ user.address }}</p>
    </div>
    <div class="mb-3">
        <label for="date_of_birth" class="form-label">Ngày sinh</label>
        <p id="date_of_birth" class="form-control-static">{{ user.date_of_birth | date:'dd/MM/yyyy' }}</p>
    </div>
</div>

<div *ngIf="menuState" class="popup-menu">
    <button class="btn btn-primary" (click)="navigateToEditProfile()">
        Thay đổi hồ sơ người dùng
    </button>
    <!-- <button class="btn btn-danger" (click)="deleteOrder(order.id)">
Delete
</button> -->
</div>

<div class="col-md-8 mx-auto mt-5">
    <h2 class="product-header fade-in">Lịch sử đơn hàng</h2>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>#</th>
                <th>Họ tên</th>
                <th>Số điện thoại</th>
                <th>Địa chỉ</th>
                <th>Thời gian đặt</th>
                <th>Trạng thái</th>
                <th>Tổng tiền</th>
                <th>Chi tiết đơn hàng</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let order of orders; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ order.fullname }}</td>
                <td>{{ order.phone_number}}</td>
                <td>{{ order.address }}</td>
                <td>{{ order.order_date}}</td>
                <td>{{ order.status }}</td>
                <td>{{ order.total_money }}</td>
                <td>
                    <!-- Hamburger menu icon (three horizontal lines) -->
                    <button class="btn btn-secondary" (click)="toggleMenu(order)">
                        <i class="fa fa-bars"></i>
                    </button>

                    <!-- Popup Menu: Only show when `menuState[order.id]` is true -->
                    <div *ngIf="menuState[order.id]" class="popup-menu">
                        <button class="btn btn-primary" (click)="viewDetails(order)">
                            View Details
                        </button>
                        <!-- <button class="btn btn-danger" (click)="deleteOrder(order.id)">
                    Delete
                  </button> -->
                    </div>
                </td>
            </tr>
            <tr *ngIf="orders.length === 0">
                <td colspan="5" class="text-center">Chưa có đơn hàng nào.</td>
            </tr>
        </tbody>
    </table>
</div>
<app-footer></app-footer>